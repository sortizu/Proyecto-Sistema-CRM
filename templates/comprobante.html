<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="../static/css/style.css">
    <title>Document</title>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Base64/1.0.1/base64.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.4/jspdf.min.js"></script>


    <script>
        $(document).ready(function () {
            function getBase64Image(img) {
                var canvas = document.createElement("canvas");

                canvas.width = img.width;
                canvas.height = img.height;
                var ctx = canvas.getContext("2d");

                ctx.drawImage(img, 0, 0);

                var dataURL = canvas.toDataURL("");

                return dataURL.replace(/^data:image\/(png|jpg);base64,/, "");

            }
            var img = new Image();

            img.onload = function () {
                var dataURI = getBase64Image(img);
                return dataURI;
            }

            img.src = "mifoto.jpg";



            $('#cmd').click(function () {
                var specialElementHandlers =
                    function (element, renderer) {
                        return true;
                    }
                var doc = new jsPDF();
                doc.fromHTML($('#content').html(), 15, 15, {
                    'width': 170,
                    'elementHandlers': specialElementHandlers
                });
                doc.addImage(img.onload(), 'JPEG', 15, 40, 100, 100);
                doc.output('datauri');
            });
        });
    </script>
</head>

<body id="target">
    <div id="content">
        <h3>Hola mundo</h3>
        <p>Esto es otro texto para meter en el PDF</p>
    </div>

    <img title="a" src="../static/resources/images/logo_pagina.png">
    <div id="editor"></div>
    <button id="cmd">generar el PDF</button>
</body>

</html>